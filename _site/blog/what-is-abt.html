<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>What is abstracting binding trees? | TYPES.HK</title><meta name="description" content="A minimal, text focused blog"><link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/favicon.ico" type="image/x-icon"><link href='/feed.xml' rel='alternate' type='application/atom+xml'><link rel="canonical" href="/blog/what-is-abt"><link rel="stylesheet" href="/assets/style.css"><body><main><h2 class="title">TYPES.HK</h2><nav> <a href="http://localhost:4000/">Home</a> <a href="http://localhost:4000/about">About</a> <!-- --></nav><h1>What is abstracting binding trees?</h1><i>Jul 11, 2023</i><h4 class="subtitle"></h4><p>In PFPL:</p><blockquote><p>An abstract binding tree (ABT) is an abstract syntax tree (AST) that also knows about binders and variables. That is to say, it generalizes AST in terms of binding.</p></blockquote><p>AST is often used to represent language constructs, for example, variables, lambda abstraction and function application. You can use many representations of binding to encode lambda abstraction. However, when expressions expand to more constructs with binding, there will be a problem.</p><p>Let’s say we use de Bruijn to represent lambda binding. Then, $\lambda f.~ \lambda x.~ f~x$ is</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Lam (Lam (App (Var 1) (Var 0)))
</code></pre></div></div><p>where <code class="language-plaintext highlighter-rouge">0</code> points to the nearest <code class="language-plaintext highlighter-rouge">Lam</code> and <code class="language-plaintext highlighter-rouge">1</code> points to the one outer <code class="language-plaintext highlighter-rouge">Lam</code>. Everything is happy. Then we extend our language with a let expression, to represent <code class="language-plaintext highlighter-rouge">let x = 1 in (succ x)</code>, we write</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Let (Lit 1) (Succ (Var 0))
</code></pre></div></div><p>We know only the second expression involved with a binding, and the first expression should be free in <code class="language-plaintext highlighter-rouge">Let</code>. However, our AST cannot tell us that. The <code class="language-plaintext highlighter-rouge">Lam</code> is lucky since there’s only one parameter of it.</p><p>For the implementation of ABT, I recommend to take a closer look at Jeremy’s <a href="https://github.com/jsiek/abstract-binding-trees">abstract-binding-trees</a>. In this library, the <code class="language-plaintext highlighter-rouge">Sig</code> is defined to denote the position of parameter with binding. For example, <code class="language-plaintext highlighter-rouge">Lam</code>, <code class="language-plaintext highlighter-rouge">App</code> and <code class="language-plaintext highlighter-rouge">Let</code> can be given as:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sig : Op → List Sig
sig op-lam = (ν ■) ∷ []
sig op-app = ■ ∷ ■ ∷ []
sig op-let = ■ ∷ (ν ■) ∷ []
</code></pre></div></div><p>The <code class="language-plaintext highlighter-rouge">ν</code> brings one variable into scope. The <code class="language-plaintext highlighter-rouge">■</code> terminates the changes in scope.</p></main><footer> <!--<nav class="sans"><hr> <input class="menu-btn" type="checkbox" id="menu-btn" /><p><label class="menu-icon" for="menu-btn">Menu</label></p><ul class="site-nav"><li><a href="/">Home</a><li><a href="/blog">Blog</a><li><a href="/designs">Designs</a><li><a href="/about">About</a><li><a href="https://canisee.xyz" title="Confirm your vision functionality">[Can I See]</a></ul></nav>--> <!-- <span class="mini-note">You've reached the end of the page. Good job!</span> --> <!--<nav class="sans"><hr><p><label class="menu-icon" for="menu-btn">Menu</label></p><ul class="site-nav"><li><a href="/">Home</a><li><a href="/blog">Blog</a><li><a href="/designs">Designs</a><li><a href="/about">About</a><li><a href="https://canisee.xyz" title="Confirm your vision functionality">[Can I See]</a></ul></nav>--><div class="bottom-footer"></div></footer><script> MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] } }; </script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script>
