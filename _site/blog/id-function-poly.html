<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>λx.x is not polymorphic? | TYPES.HK</title><meta name="description" content="A minimal, text focused blog"><link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/favicon.ico" type="image/x-icon"><link href='/feed.xml' rel='alternate' type='application/atom+xml'><link rel="canonical" href="/blog/id-function-poly"><link rel="stylesheet" href="/assets/style.css"><body><main><h2 class="title">TYPES.HK</h2><nav> <a href="http://localhost:4000/">Home</a> <a href="http://localhost:4000/about">About</a> <!-- --></nav><h1>λx.x is not polymorphic?</h1><i>Aug 22, 2023</i><h4 class="subtitle"></h4><p>Recently I’ve been working on type inference work on System F with subtyping, which basically does the job of Pierce’s local type inference, but in a different flavor and mechanical formalisation in Agda.</p><p>When crafting concrete examples, I wrote down the following ones:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>((\x. x) : ∀a. a -&gt; a) 1
</code></pre></div></div><p>This expression was however, commented on by my colleague: “<code class="language-plaintext highlighter-rouge">\x.x</code> is a monomorphic function, you can’t annotate it with a forall type”. I paused for several seconds and started drafting on my paper:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>-------------------- Lam
⊢ (\x. x) : a -&gt; a
------------------------ ?
⊢ (\x. x) : ∀a. a -&gt; a
--------------------------------------- Ann
⊢ ((\x. x) : ∀a. a -&gt; a) : Int -&gt; Int
-------------------------------------- App
⊢ ((\x. x) : ∀a. a -&gt; a) 1
</code></pre></div></div><p>Well, which rule we are missing here? Gen rule!</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Γ ⊢ e : A       a ∉ free(Γ)
---------------------------- Gen
Γ ⊢ e : ∀a. A
</code></pre></div></div><p>This rule usually appears in HM-like type systems, while not in our settings. Without the Gen rule, we only can create polymorphic functions using big lambda:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(/\a. (\x. x : a -&gt; a)) 1
</code></pre></div></div><p>To conclude, without adopting techniques like generalisation, <code class="language-plaintext highlighter-rouge">\x. x</code> is not a polymorphic function.</p></main><footer> <!--<nav class="sans"><hr> <input class="menu-btn" type="checkbox" id="menu-btn" /><p><label class="menu-icon" for="menu-btn">Menu</label></p><ul class="site-nav"><li><a href="/">Home</a><li><a href="/blog">Blog</a><li><a href="/designs">Designs</a><li><a href="/about">About</a><li><a href="https://canisee.xyz" title="Confirm your vision functionality">[Can I See]</a></ul></nav>--> <!-- <span class="mini-note">You've reached the end of the page. Good job!</span> --> <!--<nav class="sans"><hr><p><label class="menu-icon" for="menu-btn">Menu</label></p><ul class="site-nav"><li><a href="/">Home</a><li><a href="/blog">Blog</a><li><a href="/designs">Designs</a><li><a href="/about">About</a><li><a href="https://canisee.xyz" title="Confirm your vision functionality">[Can I See]</a></ul></nav>--><div class="bottom-footer"></div></footer><script> MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] } }; </script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"> </script>
